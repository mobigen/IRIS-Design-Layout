//----------------------------------------------
// Text input
// ---------------------------------------------
// mixins
@mixin text-input {
  @include font-family("sans");
  @include font-size("14");
  @include font-weight("regular");
  position: relative;
  background-color: $ui-02;
  width: 100%;
  height: rem(32px);
  padding: 0 $spacing-sm;
  color: $text-01;
  border: 1px solid $ui-04;
  border-radius: $field-border-radius;
  transition: all $duration-fast-01 motion(standard, productive);
  outline: none;

  //IE에서 input focus 시 생기는 clear button 제거
  &::-ms-clear {
    display: none;
  }

  &:hover {
    border-color: darken($ui-04, 15%);
  }

  &:active,
  &:focus {
    border-color: $secondary;
    box-shadow: 0 0 rem(4px) rgba($secondary, 0.65);
  }

  // chrom에서 자동저장된 input의 배경컬러를 제어
  &:-webkit-autofill {
    -webkit-box-shadow: 0 0 0 1000px $ui-02 inset;
  }

  &[disabled],
  &[disabled]:hover,
  &[disabled]:focus {
    cursor: not-allowed;
    background-color: $ui-02;
    border-color: $ui-04;
    opacity: 0.5;
    box-shadow: none;

    ~ .text-input-group__button {
      display: none;
    }
  }

  &[readonly],
  &[readonly]:hover,
  &[readonly]:focus {
    cursor: default;
    border-color: $ui-04;
    background-color: $odd-row;
    box-shadow: none;
  }

  &::placeholder {
    @include font-weight("light");
    color: $text-05;
  }
}

@mixin text-input--lg {
  @include font-size("16");
  padding: 0 $spacing-md;
  height: rem(40px);
}

@mixin text-input--sm {
  @include font-size("12");
  padding: 0 $spacing-xs;
  height: rem(24px);
}

// -------------------------
// classes
// -------------------------
.text-input {
  @include text-input;

  &--lg {
    @include text-input--lg;
  }

  &--sm {
    @include text-input--sm;
  }
}

// -------------------------
// input + icon
// -------------------------
.text-input-group {
  position: relative;

  .text-input {
    // 뒤에 button이 있는 경우
    &:not(&:last-child) {
      padding-right: $spacing-lg;
    }

    &:nth-last-child(3):not(div) {
      padding-right: ($spacing-xl * 2) - $spacing-3xs !important;
    }
  }

  &__input {
    @include text-input;
  }

  &__icon {
    position: absolute;
    top: 50%;
    transform: translateY(-50%);
    left: $spacing-xs;
    width: rem(20px);
    height: rem(20px);
    border: none;
    padding: 0;
    z-index: z("float");

    .svg-icon {
      position: absolute;
      width: 100%;
      height: 100%;
    }

    & ~ .text-input {
      $icon-spacing: 8px + 20px + 4px;
      padding-left: $icon-spacing;
    }
  }

  &__clear-button {
    @include button-normal;
    @include position-right-center(6px);
    width: rem(18px);
    height: rem(18px);
    padding: 0;
    border: 0;
    background-color: transparent;
    z-index: z("float");
    cursor: pointer;

    .svg-icon {
      width: rem(18px);
      height: rem(18px);
      fill: lighten($icon-01, 18%);
    }

    &:hover,
    &:focus-visible:not(:disabled) {
      .svg-icon {
        fill: $icon-01;
      }
    }

    // 뒤에 search-button 있는 경우
    &:not(&:last-child) {
      right: $spacing-2xl;
    }
  }

  &__search-button {
    @include position-right-center(1px);
    z-index: z("float");
    height: rem(30px);
    border-right: transparent;
    border-top: transparent;
    border-bottom: transparent;
  }

  &__button {
    @include button-normal;
    @include position-right-center(8px);
    width: rem(20px);
    height: rem(20px);
    padding: 0;
    border: 0;
    background-color: transparent;
    z-index: z("float");
    cursor: pointer;

    .svg-icon {
      fill: lighten($icon-01, 18%);
    }

    &:hover {
      .svg-icon {
        fill: $icon-01;
      }
    }
  }

  &--lg {
    .text-input {
      @include text-input--lg;

      &:nth-last-child(3):not(div) {
        padding-right: $spacing-sm * 6 !important;
      }
    }
    .text-input-group {
      &__icon {
        left: $spacing-sm;

        & ~ .text-input {
          $icon-spacing: 12px + 20px + 4px; // left + width + text사이와의 여백
          padding-left: $icon-spacing;
        }
      }
      &__clear-button {
        width: rem(20px);
        height: rem(20px);

        // 뒤에 search-button 있는 경우
        &:not(&:last-child) {
          right: $spacing-3xl;
        }
        .svg-icon {
          width: rem(20px);
          height: rem(20px);
        }
      }

      &__search-button {
        height: rem(38px);
      }
    }
  }

  &--sm {
    .text-input {
      @include text-input--sm;

      &:nth-last-child(3):not(div) {
        padding-right: $spacing-3xl - $spacing-3xs !important;
      }
    }

    .text-input-group {
      &__icon {
        left: $spacing-2xs;
        width: rem(14px);
        height: rem(14px);

        & ~ .text-input {
          $icon-spacing: 4px + 14px + 2px; // left + width + text사이와의 여백
          padding-left: $icon-spacing;
        }
      }

      &__clear-button,
      &__button {
        right: rem(4px);
        width: rem(14px);
        height: rem(14px);
      }

      &__clear-button {
        // 뒤에 search-button 있는 경우
        &:not(&:last-child) {
          right: $spacing-xl;
        }

        .svg-icon {
          width: rem(14px);
          height: rem(14px);
        }
      }

      &__search-button {
        height: rem(22px);
      }
    }
  }

  &--disabled {
    cursor: not-allowed;

    .text-input-group__clear-button,
    .text-input-group__search-button,
    .text-input-group__button {
      opacity: 0.4;
      cursor: not-allowed;
    }
    .svg-icon {
      opacity: 0.6;
    }
  }
}

// -------------------------
// input + suffix
// -------------------------
.text-input-wrap {
  display: flex;
  align-items: center;

  &__suffix {
    margin-left: $spacing-2xs;
    color: $text-02;
    flex-shrink: 0;
  }

  &__prefix {
    padding-right: $spacing-2xs;
    color: $text-02;
    overflow-wrap: break-word;
    word-break: keep-all;
  }
}

// -------------------------
// input with range
// -------------------------
input[type="range"] + .text-input-wrap .text-input {
  width: rem(80px);
}

// -------------------------
// text edit + text input
// -------------------------
.text-edit {
  display: flex;
  align-items: center;
  padding: $spacing-2xs 0;

  &__title {
    @include font-weight("regular");
    @include ellipsis();
  }

  &__button {
    margin-left: $spacing-2xs;
  }
}
